---
title: 'Lv.3 광고 삽입'
subtitle: ''
tag: ['programmers', 'imos', '구간합']
link: 'https://school.programmers.co.kr/learn/courses/30/lessons/72414'
---

## 풀이 방법

사용자의 시청 구간 `logs` 가 주어지고, 공익광고 구간 내의 시청중인 사용자의 수를 빠른 시간안에 구하는 것이 핵심인 문제이다.

imos 알고리즘 이용하여 $\rm O(N)$ 만에 특정 시간의 시청중인 사용자의 수를 구하고, 공익광고가 시작될 수 있는 모든 구간에서의 시청자 수의 합을 구하기 위해 imos 배열으로부터 **구간합**을 구해놓은 뒤 이를 이용하여 $\rm O(1)$ 안에 구해준다면 시간안에 문제를 해결할 수 있다.

단, 시청자 수의 합이 가장 크고 시작 시간이 빠른 정답을 구해야 하므로 정렬이 필요하기 때문에 전체 시간 복잡도는 정렬의 시간 복잡도 $\rm O(N \log N)$ 에 지배된다.

## 틀린 이유

솔루션은 빨리 떠올렸지만 문제를 제대로 읽지 않아서 계속된 반례를 해결하지 못해 정답을 보았다.

사용자들의 시청 구간과, 공익 광고의 재생 구간이 [시작, 종료] 모두 닫힌구간이라 생각하고 풀었기 때문이었다.

시간 개념이기 때문에 `00:00:01-00:00:03` 이라고 하면 1초에서 3초까지 총 2초만큼 재생이 된 것이지 3초부터 4초까지 재생되고 끝난다는 의미가 아니다. 즉 반열린구간 [시작, 종료) 이라 생각하고 풀어야 한다. 

이렇게 혼자 생각해보면 문제의 지문을 제대로 읽지 않았더라도 올바르게 구현했을텐데, 오히려 문제에서 예제 설명을 위해 주어진 사진을 내 마음대로 해석한 것이 오히려 독이 된 것 같다.

![2021_kakao_cf_03](./images/2021_kakao_cf_03.png)

문제의 예제 2번의 사진인데 사진을 보면 속이 찬 동그라미로 표시되고 있다. 올바르게 표현된 사진이지만 속이 꽉 찬 동그라미니깐 모두 닫힌구간이구나 하고 내 마음대로 해석을 했던 것이다.

