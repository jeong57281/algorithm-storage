---
title: '2616번: 소형기관차'
subtitle: ''
tag: ['Baekjoon', 'DP', '누적합']
link: 'https://www.acmicpc.net/problem/2616'
---

모든 경우를 구해 메모이제이션하면 풀리지 않을까? 생각하고 제한조건을 보니 N이 5만으로 재귀 함수에서 복잡도가 $\rm O(N^3)$ 으로, 불가능해보여 다른 방법을 찾다 결국 해결하지 못하고 답을 보았던 문제이다.

답을 보았더니 처음 생각했던 접근이 맞았다. 시간초과가 날 것 같은데 내가 복잡도 계산을 잘못했나 싶어, dp + memoization 을 이용하여 풀이하였는데 역시 시간초과가 났다.

이유를 찾아보니 한 가지 차이점이 있었다. 핵심은 재귀에서 최대 5만번의 반복문을 돌려주는 것이 아닌, 소형 기관차가 현재 객차를 선택하느냐, 선택하지 않느냐 두 가지의 경우로 나누어 재귀 호출해주는 것이었다.

N값이 매우 클 경우 수평적으로 매우 많은 재귀 호출이 발생하면서 메모이제이션이 되기 전에 시간초과가 발생하게 되는 것이었다.

\+ 누적합이 분류에 있는 이유는, 누적합을 이용하지 않고 일일이 구간값을 계산한다면 복잡도가 매우 커지기 때문이다. 기존 복잡도에 최대 $50,000 \over 3$ 값을 곱한다고 생각하면 된다.
